(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[509],{6187:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-poster",function(){return l(6340)}])},4533:function(e,t,l){"use strict";l.d(t,{zx:function(){return o},p0:function(){return x},Wn:function(){return p},xv:function(){return s}});var n=l(5893),a=l(512),r=l(7851);let i=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,r.m)((0,a.Z)(...t))},s=e=>{let{className:t,children:l,font:a="gothic",...r}=e;return(0,n.jsx)("span",{...r,className:i("text-base text-chalk-50 tracking-[0.16px]",{druk:"font-[Druk-medium]",gothic:"font-[TradeGothicLTStd]"}[a],t),children:l})},o=e=>{let{className:t,children:l,loading:a=!1,loadingText:r="",textClass:o,...c}=e;return(0,n.jsx)("button",{...c,className:i("flex justify-center items-center skew-y-[1deg] hover:skew-y-[1.5deg]","w-full px-6 py-2 max-w-[12rem] text-center bg-tomato-50","disabled:cursor-not-allowed disabled:opacity-50",t),children:(0,n.jsx)("div",{className:"flex items-center space-x-3 justify-center",children:(0,n.jsx)(s,{className:i("text-sm text-chalk-50 font-bold","md:text-base uppercase skew-y-[-1deg] font-[Druk-bold]",o),children:r&&a?r:l})})})};var c=l(7294),d=l(5675),u=l.n(d);let x=e=>{let{onFileSelect:t,title:l,subTitle:a,acceptType:r,maxWidth:o,maxHeight:d}=e,[x,f]=(0,c.useState)(!1),[p,v]=(0,c.useState)(""),m=(0,c.useRef)(null),h=async e=>{var l,n,a;(null==e?void 0:null===(l=e.target)||void 0===l?void 0:l.files)&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.files[0])&&t&&"function"==typeof t&&(d&&o?w(e.target.files[0]):(v(null===(a=e.target.files[0])||void 0===a?void 0:a.name),t(e.target.files[0])))},g=async e=>{var l,n,a;e.preventDefault(),f(!1);let r=(null==e?void 0:null===(l=e.dataTransfer)||void 0===l?void 0:l.files[0])||"";r&&t&&"function"==typeof t?d&&o&&w(r):(v(null==e?void 0:null===(a=e.dataTransfer)||void 0===a?void 0:null===(n=a.files[0])||void 0===n?void 0:n.name),t(r))},b=(e,t,l)=>{let n=window.URL||window.webkitURL,a=new(u()),r=n.createObjectURL(e),i=new Promise((e,i)=>{a.onload=function(){this.width<=t&&this.height<=l?e(!0):i(!1),n.revokeObjectURL(r)},a.onerror=i});return a.src=r,i},w=async e=>{try{let l=await b(e,o,d);l?(v(null==e?void 0:e.name),t(e)):(v(""),t(""))}catch(e){v(""),t("")}};return(0,n.jsx)("div",{onDragOver:e=>{e.preventDefault(),f(!0)},onDragLeave:e=>{e.preventDefault(),f(!1)},onDrop:g,children:(0,n.jsxs)("div",{className:i("flex items-center justify-between","cursor-pointer px-[15px] py-[10px] skew-y-[-1deg]",{"bg-primary-300":x,"border border-tomato-50 bg-secondary-50":!x}),onClick:()=>{m.current&&m.current.click()},children:[(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("p",{className:"font-bold tracking-[0.18px] text-[18px]",children:[p||l,(0,n.jsx)(s,{className:"tracking-[0.16px] block text-graphite-100",children:a})]})}),(0,n.jsx)(u(),{src:"/cloud-red.svg",className:"",alt:"cloud-icon",width:34,height:34}),(0,n.jsx)("input",{ref:m,className:"hidden",accept:r,type:"file",onChange:h})]})})};var f=l(2777);let p=e=>{let{jsonObjects:t,name:l,onSelectFrame:a,selectedFrameName:r="",forwardedRef:s}=e,[o,d]=(0,c.useState)(""),[u,x]=(0,c.useState)(!0);c.useImperativeHandle(s,()=>({downloadAsImage:p})),(0,c.useEffect)(()=>{let e=new f.fabric.StaticCanvas(l);e.loadFromJSON(t,()=>{let t=e.toDataURL({format:"png",left:0,top:0,width:325,height:563});d(t),x(!1)})},[]);let p=()=>{if(o){let e=document.createElement("a");e.href=o,e.download="downloaded-template.png",e.click()}};return(0,n.jsx)("div",{className:"w-full",children:u?(0,n.jsx)("div",{className:"w-full animate-pulse h-96 bg-primary-200"}):(0,n.jsx)("div",{className:i("p-[10px]",r===l&&"bg-tomato-200"),onClick:()=>a&&a(l),children:(0,n.jsx)("img",{className:"",src:o,alt:l})})})}},6340:function(e,t,l){"use strict";l.r(t);var n=l(5893),a=l(7294),r=l(5675),i=l.n(r),s=l(512),o=l(7536),c=l(7533),d=l(6310),u=l(1163),x=l(4533),f=l(9531);let p=d.Ry({content:d.Z_().required("Content is required field"),file:d.nK().required("File is required field")}).required();t.default=()=>{let e=(0,u.useRouter)(),{register:t,setValue:l,handleSubmit:r,watch:d,formState:{errors:v}}=(0,o.cI)({resolver:(0,c.X)(p),mode:"onChange"}),[m,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(""),w=async t=>{var l,n,a,r,i;h(!0);let[s,o]=await Promise.all([(0,f.xF)({story:null==t?void 0:t.content}),(0,f.fr)(null==t?void 0:t.file)]);h(!1),(null==s?void 0:null===(l=s.data)||void 0===l?void 0:l.title)&&(null==o?void 0:o.url)?(b(""),e.push({pathname:"/templates",query:{title:null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.title,subtitle:null==s?void 0:null===(a=s.data)||void 0===a?void 0:a.subtitle,characters:(null==s?void 0:null===(i=s.data)||void 0===i?void 0:null===(r=i.characters)||void 0===r?void 0:r.map(e=>e.name).join(", "))||"",fileUrl:null==o?void 0:o.url}})):b("Oops! Something went wrong. Please try again later.")};return(0,n.jsx)("div",{className:(0,s.Z)("bg-cover bg-center bg-no-repeat bg-create-poster-page","flex flex-col justify-center items-center min-h-screen"),children:(0,n.jsxs)("div",{className:"w-2/5 bg-secondary-50 text-chalk-50",children:[(0,n.jsx)(i(),{className:"relative left-[-52px]",src:"/logoHWD.svg",alt:"logo",width:200,height:99}),(0,n.jsx)("div",{className:"w-[78%]",children:(0,n.jsx)(x.xv,{className:"tracking-[0px] uppercase font-bold",children:"1. ESCREVE A SINOPSE: DA TUA HIST\xd3RIA, UM PEQUENO RESUMO QUE EXPLIQUE O QUE ACONTECEU E QUEM ESTEVE ENVOLVIDO."})}),(0,n.jsx)("textarea",{className:(0,s.Z)("w-full min-h-[200px] mb-[29px] skew-y-[-1deg] bg-secondary-50 text-chalk-50","border border-tomato-50 textArea px-[10px] py-[15px]"),id:"content",...t("content")}),(0,n.jsx)(x.xv,{className:"tracking-[0px] uppercase font-bold",children:"2. SUBMETE UMA IMAGEM OU FOTOGRAFIA PARA O TEU POSTER."}),(0,n.jsx)(x.p0,{title:"FAZ UPLOAD DA TUA FOTOGRAFIA AQUI!",subTitle:"Click to Upload or drag and drop PNG or JPG (max.1080x1920 pixels)",acceptType:".png,.jpg,.jpeg",onFileSelect:e=>l("file",e)}),g&&(0,n.jsx)("p",{className:"text-tomato-50 mt-7 text-center",children:g}),(0,n.jsx)(x.zx,{onClick:r(w),className:"mb-2 mt-[33px] mx-auto skew-y-[1deg]",disabled:!d("content")||!d("file")||m,loadingText:"Loading...",loading:m,children:"CONTINUAR"})]})})}},4960:function(){},6759:function(){},6272:function(){}},function(e){e.O(0,[498,601,847,774,888,179],function(){return e(e.s=6187)}),_N_E=e.O()}]);