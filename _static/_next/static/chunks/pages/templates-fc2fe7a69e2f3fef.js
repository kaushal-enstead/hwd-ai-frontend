(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{7710:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/templates",function(){return l(9013)}])},4533:function(e,t,l){"use strict";l.d(t,{zx:function(){return c},p0:function(){return m},Wn:function(){return f},xv:function(){return r}});var n=l(5893),a=l(512),i=l(7851);let s=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,i.m)((0,a.Z)(...t))},r=e=>{let{className:t,children:l,font:a="gothic",...i}=e;return(0,n.jsx)("span",{...i,className:s("text-base text-chalk-50 tracking-[0.16px]",{druk:"font-[Druk-medium]",gothic:"font-[TradeGothicLTStd]"}[a],t),children:l})},c=e=>{let{className:t,children:l,loading:a=!1,loadingText:i="",textClass:c,...o}=e;return(0,n.jsx)("button",{...o,className:s("flex justify-center items-center skew-y-[1deg] hover:skew-y-[1.5deg]","w-full px-6 py-2 max-w-[12rem] text-center bg-tomato-50","disabled:cursor-not-allowed disabled:opacity-50",t),children:(0,n.jsx)("div",{className:"flex items-center space-x-3 justify-center",children:(0,n.jsx)(r,{className:s("text-sm text-chalk-50 font-bold","md:text-base uppercase skew-y-[-1deg] font-[Druk-bold]",c),children:i&&a?i:l})})})};var o=l(7294),d=l(5675),u=l.n(d);let m=e=>{let{onFileSelect:t,title:l,subTitle:a,acceptType:i,maxWidth:c,maxHeight:d}=e,[m,v]=(0,o.useState)(!1),[f,p]=(0,o.useState)(""),x=(0,o.useRef)(null),g=async e=>{var l,n,a;(null==e?void 0:null===(l=e.target)||void 0===l?void 0:l.files)&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.files[0])&&t&&"function"==typeof t&&(d&&c?j(e.target.files[0]):(p(null===(a=e.target.files[0])||void 0===a?void 0:a.name),t(e.target.files[0])))},h=async e=>{var l,n,a;e.preventDefault(),v(!1);let i=(null==e?void 0:null===(l=e.dataTransfer)||void 0===l?void 0:l.files[0])||"";i&&t&&"function"==typeof t?d&&c&&j(i):(p(null==e?void 0:null===(a=e.dataTransfer)||void 0===a?void 0:null===(n=a.files[0])||void 0===n?void 0:n.name),t(i))},b=(e,t,l)=>{let n=window.URL||window.webkitURL,a=new(u()),i=n.createObjectURL(e),s=new Promise((e,s)=>{a.onload=function(){this.width<=t&&this.height<=l?e(!0):s(!1),n.revokeObjectURL(i)},a.onerror=s});return a.src=i,s},j=async e=>{try{let l=await b(e,c,d);l?(p(null==e?void 0:e.name),t(e)):(p(""),t(""))}catch(e){p(""),t("")}};return(0,n.jsx)("div",{onDragOver:e=>{e.preventDefault(),v(!0)},onDragLeave:e=>{e.preventDefault(),v(!1)},onDrop:h,children:(0,n.jsxs)("div",{className:s("flex items-center justify-between","cursor-pointer px-[15px] py-[10px] skew-y-[-1deg]",{"bg-primary-300":m,"border border-tomato-50 bg-secondary-50":!m}),onClick:()=>{x.current&&x.current.click()},children:[(0,n.jsx)("div",{className:"",children:(0,n.jsxs)("p",{className:"font-bold tracking-[0.18px] text-[18px]",children:[f||l,(0,n.jsx)(r,{className:"tracking-[0.16px] block text-graphite-100",children:a})]})}),(0,n.jsx)(u(),{src:"/cloud-red.svg",className:"",alt:"cloud-icon",width:34,height:34}),(0,n.jsx)("input",{ref:x,className:"hidden",accept:i,type:"file",onChange:g})]})})};var v=l(2777);let f=e=>{let{jsonObjects:t,name:l,onSelectFrame:a,selectedFrameName:i="",forwardedRef:r}=e,[c,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(!0);o.useImperativeHandle(r,()=>({downloadAsImage:f})),(0,o.useEffect)(()=>{let e=new v.fabric.StaticCanvas(l);e.loadFromJSON(t,()=>{let t=e.toDataURL({format:"png",left:0,top:0,width:325,height:563});d(t),m(!1)})},[]);let f=()=>{if(c){let e=document.createElement("a");e.href=c,e.download="downloaded-template.png",e.click()}};return(0,n.jsx)("div",{className:"w-full",children:u?(0,n.jsx)("div",{className:"w-full animate-pulse h-96 bg-primary-200"}):(0,n.jsx)("div",{className:s("p-[10px]",i===l&&"bg-tomato-200"),onClick:()=>a&&a(l),children:(0,n.jsx)("img",{className:"",src:c,alt:l})})})}},9013:function(e,t,l){"use strict";l.r(t);var n=l(5893),a=l(7294),i=l(512),s=l(5675),r=l.n(s),c=l(2432),o=l(1163),d=l(4533),u=l(8145);t.default=()=>{let[e]=(0,c.aM)({query:u.t}),t=(0,o.useRouter)(),{title:l,subtitle:s,characters:m,fileUrl:v}=t.query,[f,p]=(0,a.useState)([]),[x,g]=(0,a.useState)(""),{data:h,fetching:b,error:j}=e;return(0,a.useEffect)(()=>{var e,t,n,a;if((null==h?void 0:null===(t=h.paginationTemplate)||void 0===t?void 0:null===(e=t.items)||void 0===e?void 0:e.length)&&l&&s&&v){let e=null==h?void 0:null===(a=h.paginationTemplate)||void 0===a?void 0:null===(n=a.items)||void 0===n?void 0:n.map(e=>{var t,n;let a=JSON.parse(null==e?void 0:e.template);return a.objects=null==a?void 0:null===(t=a.objects)||void 0===t?void 0:t.map(e=>"T\xcdTULO"===e.name?{...e,text:l}:"SUBT\xcdTULO"===e.name?{...e,text:s}:"ATORES"===e.name?{...e,text:m}:e),(null==a?void 0:null===(n=a.backgroundImage)||void 0===n?void 0:n.name)==="frame"&&(a.backgroundImage.src="http://64.226.64.247".concat(v)),e.template=JSON.stringify(a),e});p(e)}},[h,b]),(0,n.jsxs)("div",{className:(0,i.Z)("bg-cover bg-center bg-no-repeat bg-template-page","flex flex-col justify-center items-center min-h-screen text-chalk-50"),children:[(0,n.jsxs)("div",{className:"bg-secondary-50 text-chalk-50",children:[(0,n.jsx)(r(),{className:"relative left-[-52px]",src:"/logoHWD.svg",alt:"logo",width:200,height:99}),(0,n.jsx)("div",{className:"",children:(0,n.jsx)(d.xv,{className:"tracking-[0px] uppercase font-bold",children:"3. ESCOLHE O TIPO DE POSTER QUE CHAMA MAIS \xc0 ATEN\xc7\xc3O."})})]}),(b&&!h&&!j||(null==f?void 0:f.length)===0)&&(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-4 animate-pulse",children:[(0,n.jsx)("div",{className:"w-full h-96 bg-primary-200"}),(0,n.jsx)("div",{className:"w-full h-96 bg-primary-200"}),(0,n.jsx)("div",{className:"w-full h-96 bg-primary-200"}),(0,n.jsx)("div",{className:"w-full h-96 bg-primary-200"})]}),!b&&h&&!j&&(null==f?void 0:f.length)>0&&(0,n.jsx)("div",{className:"grid grid-cols-4 gap-9 my-[25px] justify-items-center w-[80%]",children:null==f?void 0:f.map(e=>(0,n.jsx)(d.Wn,{jsonObjects:null==e?void 0:e.template,name:null==e?void 0:e.name,onSelectFrame:e=>g(e),selectedFrameName:x},null==e?void 0:e._id))}),(0,n.jsx)(d.zx,{disabled:!x,onClick:()=>{let e=null==f?void 0:f.find(e=>{if((null==e?void 0:e.name)===x)return e});(null==e?void 0:e.name)&&(localStorage.setItem("temp",JSON.stringify(e)),t.push({pathname:"/share-template"}))},className:"mb-5",children:"CONTINUAR"})]})}},1163:function(e,t,l){e.exports=l(6885)},4960:function(){},6759:function(){},6272:function(){}},function(e){e.O(0,[498,601,774,888,179],function(){return e(e.s=7710)}),_N_E=e.O()}]);